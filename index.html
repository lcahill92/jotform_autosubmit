<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JotForm Widget URL Detection</title>

    <!-- Example Canonical Link -->
    <link rel="canonical" href="https://form.jotform.com/250137186711049?submission=success">
</head>

<body>
    <script>
        function getCanonicalUrl() {
            let url = null;

            try {
                // Method 1: Check for <link rel="canonical">
                const canonicalTag = document.querySelector('link[rel="canonical"]');
                if (canonicalTag) {
                    url = canonicalTag.href;
                    console.log("[Method 1] Canonical URL from <link rel='canonical'>:", url);
                } else {
                    console.warn("[Method 1] No <link rel='canonical'> tag found.");
                }
            } catch (error) {
                console.error("[Method 1] Error reading canonical tag:", error);
            }

            if (!url) {
                try {
                    // Method 2: Use `document.location.href`
                    url = document.location.href;
                    console.log("[Method 2] URL from document.location.href:", url);
                } catch (error) {
                    console.error("[Method 2] Error reading document.location.href:", error);
                }
            }

            if (!url) {
                try {
                    // Method 3: Use `document.URL`
                    url = document.URL;
                    console.log("[Method 3] URL from document.URL:", url);
                } catch (error) {
                    console.error("[Method 3] Error reading document.URL:", error);
                }
            }

            if (!url) {
                try {
                    // Method 4: Use `window.location.href`
                    url = window.location.href;
                    console.log("[Method 4] URL from window.location.href:", url);
                } catch (error) {
                    console.error("[Method 4] Error reading window.location.href:", error);
                }
            }

            if (!url) {
                console.error("Failed to retrieve URL using all methods.");
            } else {
                console.log("Final URL detected:", url);
            }

            return url;
        }

        // Execute the URL retrieval and log attempts
        const detectedUrl = getCanonicalUrl();
    </script>
</body>

</html>