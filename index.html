<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extract URLs</title>
</head>
<body>
    <script>
        // Wait for the DOM to fully load
        document.addEventListener('DOMContentLoaded', () => {
            // Function to extract URLs from the DOM
            function extractUrlsFromDom() {
                const urls = {
                    canonicalUrls: [],
                    trackingImageUrl: null,
                };

                // Extract canonical URLs from <link rel="canonical">
                const canonicalTags = document.querySelectorAll('link[rel="canonical"]');
                canonicalTags.forEach(tag => {
                    if (tag.href) {
                        urls.canonicalUrls.push(tag.href);
                    }
                });

                // Extract tracking image URL from <img id="event_tracking_image">
                const trackingImage = document.querySelector('img#event_tracking_image');
                if (trackingImage && trackingImage.src) {
                    urls.trackingImageUrl = trackingImage.src;
                }

                // Output the results to the console
                if (urls.canonicalUrls.length > 0) {
                    console.log("Canonical URLs found:");
                    urls.canonicalUrls.forEach((url, index) => {
                        console.log(`Canonical URL ${index + 1}: ${url}`);
                    });
                } else {
                    console.warn("No canonical URLs found in the DOM.");
                }

                if (urls.trackingImageUrl) {
                    console.log("Tracking Image URL found:");
                    console.log(urls.trackingImageUrl);
                } else {
                    console.warn("No tracking image URL found in the DOM.");
                }

                return urls;
            }

            // Call the function to extract and log URLs
            extractUrlsFromDom();
        });
    </script>
</body>
</html>