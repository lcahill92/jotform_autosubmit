<!DOCTYPE html>
<html>
    <head>
        <title>Auto Submit Widget</title>
        <!-- Load JotForm's Custom Widget SDK -->
        <script src="//js.jotform.com/JotFormCustomWidget.min.js"></script>
    </head>
    <body>
        <div id="widget-container">
            <h3>The form will auto-submit shortly (test)....</h3>
        </div>
        <script type="text/javascript">
            // Subscribe to the "ready" event to initialize the widget
            JFCustomWidget.subscribe("ready", function () {
    console.log("Widget SDK is initialized.");

    // Notify JotForm that the widget is initialized
    JFCustomWidget.sendData({ initialized: true });
    console.log("Initialization data sent to JotForm.");

    // Attempt auto-submit after a delay
    setTimeout(function () {
        console.log("Attempting to auto-submit the form...");
        try {
            const submissionData = {
                valid: true, // Mark the widget as valid
                value: "Test submission value" // Placeholder value
            };
            console.log("Sending submission data:", submissionData);

            // Trigger form submission
            JFCustomWidget.sendSubmit(submissionData);
            console.log("Form submission sent successfully.");
        } catch (error) {
            console.error("Error during submission:", error);
        }
    }, 3000); // Delay: 3 seconds
});

            // Log any subscription errors for debugging
            JFCustomWidget.subscribe("error", function (error) {
                console.error("Widget SDK error:", error);
            });

            // Confirm submission acknowledgment from JotForm
            JFCustomWidget.subscribe("submitAcknowledged", function () {
                console.log("Form submission acknowledged by JotForm.");
            });
        </script>
    </body>
</html>
