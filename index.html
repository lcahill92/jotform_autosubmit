<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Fields Example</title>
</head>
<body>
    <h1>Dynamic Form Fields Example</h1>
    <p>This form has 5 placeholder fields dynamically generated.</p>

    <form id="dynamicForm">
        <!-- Dynamic fields will be appended here -->
    </form>

    <button id="submitBtn">Submit Form</button>

    <script>
        // Function to dynamically create exactly 5 form fields
        function setupFormFields() {
            const formElement = document.getElementById('dynamicForm');

            // Clear any existing fields
            formElement.innerHTML = '';

            // Create 5 dynamic fields
            for (let i = 1; i <= 5; i++) {
                const fieldWrapper = document.createElement('div');
                fieldWrapper.style.marginBottom = '10px';

                const label = document.createElement('label');
                label.textContent = `Field ${i}: `;
                label.setAttribute('for', `field_${i}`);

                const input = document.createElement('input');
                input.type = 'text';
                input.id = `field_${i}`;
                input.name = `field_${i}`;
                input.placeholder = `Placeholder Field ${i}`;

                fieldWrapper.appendChild(label);
                fieldWrapper.appendChild(input);

                formElement.appendChild(fieldWrapper);
            }
        }

        // Function to programmatically submit the form
        function autoSubmitForm() {
            const apiKey = "YOUR_API_KEY_HERE"; // Replace with actual API key
            const formId = "YOUR_FORM_ID_HERE"; // Replace with actual Form ID

            if (!apiKey || !formId) {
                console.error('API Key or Form ID not provided');
                return;
            }

            // Collect field values
            const formData = new URLSearchParams();
            const fields = document.querySelectorAll('#dynamicForm input');
            fields.forEach((field) => {
                formData.append(field.name, field.value);
            });

            // Form action URL
            const actionUrl = `https://api.jotform.com/form/${formId}/submissions`;

            // Send POST request
            fetch(actionUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'APIKEY': apiKey
                },
                body: formData.toString(),
            })
                .then((response) => {
                    if (response.ok) {
                        console.log('Form submitted successfully:', response);
                    } else {
                        console.error('Error submitting form:', response.status, response.statusText);
                    }
                })
                .catch((error) => console.error('Error submitting form:', error));
        }

        // Setup form fields on page load
        setupFormFields();

        // Add event listener to the submit button
        document.getElementById('submitBtn').addEventListener('click', (event) => {
            event.preventDefault();
            autoSubmitForm();
        });
    </script>
</body>
</html>