<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JotForm Widget URL Detection</title>

    <!-- Multiple Canonical Tags -->
    <link rel="canonical" href="https://form.jotform.com/250137186711049?submission=bad">
    <link rel="canonical" href="https://form.jotform.com/250137186711049?email=test@test.com">
</head>

<body>
    <img id="event_tracking_image" aria-hidden="true" 
        src="https://events.jotform.com/form/250137186711049/?ref=&amp;res=1728x1117&amp;eventID=1736989869099_250137186711049_zuXXGaq&amp;loc=https%253A%252F%252Fform.jotform.com%252F250137186711049%253Femail%253Dtest%2540test.com" 
        alt="jftr" width="1" height="1" style="display: none;">

    <script>
        function findUrls() {
            const detectedUrls = {
                canonicalUrls: [],
                imgSrc: null,
            };

            // Extract all canonical URLs
            try {
                const canonicalTags = document.querySelectorAll('link[rel="canonical"]');
                if (canonicalTags.length > 0) {
                    canonicalTags.forEach(tag => {
                        if (tag.href) {
                            detectedUrls.canonicalUrls.push(tag.href);
                        }
                    });
                } else {
                    console.warn("No canonical tags found.");
                }
            } catch (error) {
                console.error("Error reading canonical tags:", error);
            }

            // Extract URL from img tag in body
            try {
                const trackingImg = document.querySelector('img#event_tracking_image');
                if (trackingImg && trackingImg.src) {
                    detectedUrls.imgSrc = trackingImg.src;
                } else {
                    console.warn("No event tracking image found.");
                }
            } catch (error) {
                console.error("Error reading tracking image src:", error);
            }

            // Log the detected URLs
            console.log("Detected URLs:", detectedUrls);

            // Log each Canonical URL
            if (detectedUrls.canonicalUrls.length > 0) {
                console.log("Canonical URLs:");
                detectedUrls.canonicalUrls.forEach((url, index) => {
                    console.log(`Canonical URL ${index + 1}:`, url);
                });
            } else {
                console.error("Failed to detect any canonical URLs.");
            }

            // Log the Tracking Image URL
            if (detectedUrls.imgSrc) {
                console.log("Tracking Image URL:", detectedUrls.imgSrc);
            } else {
                console.error("Failed to detect tracking image URL.");
            }

            return detectedUrls;
        }

        // Call the function to detect and log URLs
        const urls = findUrls();
    </script>
</body>

</html>